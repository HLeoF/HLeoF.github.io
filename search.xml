<?xml version="1.0" encoding="utf-8"?>
<search> 
  
  
    
    <entry>
      <title>Association Rule Mining Conclusion</title>
      <link href="/2024/02/20/arm-conclu/"/>
      <url>/2024/02/20/arm-conclu/</url>
      
        <content type="html"><![CDATA[<p><img src="/ARM/result/22.jpg" alt="La Liga Top Goalkeepers"></p><p>There exists a strong relationship between the goalkeeper’s saving ability and the team’s performance and ranking after exploring. In general, goalkeepers who perform well tend to have a high save ability, which helps to boost the ranking and performance of the club. On the contrary, goalkeepers with average or poor save ability can cause goals to be conceded, which affects the results of the clubs and their final ranking. It is worth noting that goalkeepers with poor saves can fall into a vicious cycle:</p><p>$$ \text{Poor Saving Ability} \to \text{Poor Performance on The Field} \to \text{Less Times To Play} \to \text{Poorer Saving Ability} $$</p><p>It not only can affect an individual player’s confidence, it can also have a negative impact on the overall team ranking. Therefore, the ability of a goalkeeper is crucial to the overall performance of the club. </p><hr><h1 id="Resource"><a href="#Resource" class="headerlink" title="Resource"></a>Resource</h1><p>image: <a href="https://images.app.goo.gl/VrQfqiiUqKYZEc647">https://images.app.goo.gl/VrQfqiiUqKYZEc647</a></p>]]></content>
      
      
      <categories>
          
          <category> Association Rule Mining </category>
          
      </categories>
      
      
        <tags>
            
            <tag> Association Rule Mining </tag>
            
            <tag> Conclusion </tag>
            
            <tag> Unsupervised Machine Learning </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>Association Rule Mining Results</title>
      <link href="/2024/02/20/arm-result/"/>
      <url>/2024/02/20/arm-result/</url>
      
        <content type="html"><![CDATA[<h1 id="Results"><a href="#Results" class="headerlink" title="Results"></a>Results</h1><p>During exploring association rule mining, the thresholds hold finally determined after repeated testing and comparison results are follows:</p><p>$$ Support &#x3D; 0.01 $$</p><p>$$ Confidence &#x3D; 0.5 $$</p><p>$$ Min Length &#x3D; 2 $$</p><pre class="language-R" data-language="R"><code class="language-R">rules &lt;- arules::apriori(arm, parameter &#x3D; list(supp&#x3D;0.01, conf&#x3D;0.5, minlen&#x3D;2))</code></pre><h2 id="Support"><a href="#Support" class="headerlink" title="Support"></a>Support</h2><p><img src="/ARM/result/1.jpg" alt="Top 15 Rules For Support"><br><img src="/ARM/result/1-1.jpg" alt="Network Graph For Support"></p><p>Finding some interesting things through analyzing the top 15 rules for support and its visualization of results.</p><p>For $\text{Normal_Saved_Skill} \to \text{Normal_Preformance} (Support \approx 0.57 \And  Confidence \approx 0.95)$. It represents that a goalkeeper’s performance in saves is closely related to his overall performance on the field. Normally, a goalkeeper with average save ability can lead to conceding goals, which can affect the club’s results and ranking.</p><p>For $\text{Good_Preformance} \to \text{Good_Saved_Skill} (Support \approx 0.27 \And  Confidence \approx 0.9)$.It tells that a goalkeeper who performs well is likely to have excellent save ability, which may help to boost the team’s ranking.</p><p>For $\text{(Mid_Ranking, Normal_Saved_Skill)} \to \text{Normal_Preformance} (Support \approx 0.27 \And  Confidence \approx 1)$. It indicates that goalkeepers on teams in the middle table are likely to be average in their ability to make saves, so it reflects these goalkeepers’ average performance on the pitch.</p><h2 id="Confidence"><a href="#Confidence" class="headerlink" title="Confidence"></a>Confidence</h2><p><img src="/ARM/result/2.jpg" alt="Top 15 Rules For Confidence"><br><img src="/ARM/result/2-2.jpg" alt="Netwrok Graph For Confidence"></p><p>Getting some interesting results based on the top 15 rules for confidence and its node graph.</p><p>According to $\text{(Bad_Performance, Bad_Saved_Skill)} \to \text{LessTime_Games} rule$. It shows that a goalkeeper’s saving ability is bad, his performance on the pitch would also be affected, so the probability of getting a chance to play becomes small.  This situation can cause his performance to deteriorate further, and step into a vicious circle. Not only will undermine the goalkeeper’s own confidence, but it may also have a negative impact on the team’s overall results. </p><p>According to $\text{Bad_Saved_Skill} \to \text{Mid_Ranking} $ rule. It reflects on a common situation in reality. When a goalkeeper has a relatively low save ability and his team is in the middle of the table, this usually means that the goalkeeper is not the starting goalkeeper, and he may be the second or third goalkeeper of the team. As his save ability was not sufficient for the role of starting goalkeeper, he played relatively little in the game. However, the goalkeeper with poor save ability may be forced to replace the starting goalkeeper once the starting GK is injured and unable to play. Because clubs’ backup GK may not be able to provide the same level of performance as their starting GK, the teams’ results may be affected.</p><h2 id="Lift"><a href="#Lift" class="headerlink" title="Lift"></a>Lift</h2><p><img src="/ARM/result/3.jpg" alt="Top 15 Rules For Lift"><br><img src="/ARM/result/3-1.jpg" alt="Network Graph For Lift"></p><p>According to $\text{(Good_Saved_Skill, High_Ranking, Normal_Saved_Skill)} \to \text{NormalTime_Games}$ rule. It indicates that a goalkeeper is good on the field, and his team’s ranks also high. However, his chances of getting playing time are also average due to his average save ability. Therefore, this rule is quite realistic. For higher-ranked teams, a goalkeeper’s ability to save is crucial. As a typical example, Barcelona’s goalkeeper Peña has had some opportunities to play after Ter Stegen’s injury. He has had serval highlight performances at the beginning, but the team often loses the ball due to his average saving ability. </p>]]></content>
      
      
      <categories>
          
          <category> Association Rule Mining </category>
          
      </categories>
      
      
        <tags>
            
            <tag> Unsupervised Machine Learning </tag>
            
            <tag> Association Rule </tag>
            
            <tag> Results </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>Association Rule Mining Code</title>
      <link href="/2024/02/20/arm-code/"/>
      <url>/2024/02/20/arm-code/</url>
      
        <content type="html"><![CDATA[<h1 id="ARM-Code"><a href="#ARM-Code" class="headerlink" title="ARM Code"></a>ARM Code</h1><p><em><strong>Data Paparation Code<a href="https://github.com/HLeoF/laliga_machine_learning/blob/main/laligaProject/ARM/ARM_Data_Prep.R">R Code</a></strong></em><br><em><strong>Transcation Data<a href="https://github.com/HLeoF/laliga_machine_learning/blob/main/laligaProject/ARM/arm.csv">CSV File</a></strong></em><br><em><strong>ARM Code<a href="https://github.com/HLeoF/laliga_machine_learning/blob/main/laligaProject/ARM/ARM.R">R Code</a></strong></em></p><pre class="language-R" data-language="R"><code class="language-R">install.packages(&quot;arulesViz&quot;)install.packages(&quot;arules&quot;)library(arulesViz)library(tidyverse)library(dplyr)library(arules)# Read CSV file data as Transaction Dataarm &lt;- read.transactions(&quot;arm.csv&quot;,                          rm.duplicates &#x3D; FALSE,                          format&#x3D;&quot;basket&quot;,                         sep &#x3D; &quot;,&quot;,                         cols&#x3D;NULL,                         header &#x3D; FALSE)### Apply ARM rulesrules &lt;- arules::apriori(arm, parameter &#x3D; list(supp&#x3D;0.01, conf&#x3D;0.5, minlen&#x3D;2))# 15 Supportsupport &lt;- sort(rules, by &#x3D; &quot;support&quot;, decreasing &#x3D; TRUE)inspect(support[1:15])subrules &lt;- head(sort(support,by&#x3D;&quot;support&quot;),15)plot(subrules,method&#x3D;&quot;graph&quot;,engine &#x3D;&quot;interactive&quot;)# 15 Confidenceconfidence &lt;- sort(rules, by &#x3D; &quot;confidence&quot;, decreasing &#x3D; TRUE)inspect(confidence[1:15])subrules1 &lt;- head(sort(confidence,by&#x3D;&quot;confidence&quot;, decreasing &#x3D; TRUE),15)plot(subrules1,method&#x3D;&quot;graph&quot;,engine &#x3D;&quot;interactive&quot;)#15 Liftlift &lt;- sort(rules, by &#x3D; &quot;lift&quot;, decreasing &#x3D; TRUE)inspect(lift[1:15])subrules2 &lt;- head(sort(lift,by&#x3D;&quot;lift&quot;),15)plot(subrules2,method&#x3D;&quot;graph&quot;,engine &#x3D;&quot;interactive&quot;)</code></pre>]]></content>
      
      
      <categories>
          
          <category> Association Rule Mining </category>
          
      </categories>
      
      
        <tags>
            
            <tag> Unsupervised Machine Learning </tag>
            
            <tag> Association Rule </tag>
            
            <tag> Code </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>Association Rule Mining Data Preparation</title>
      <link href="/2024/02/20/arm-data/"/>
      <url>/2024/02/20/arm-data/</url>
      
        <content type="html"><![CDATA[<h1 id="ARM-Data-Preparation"><a href="#ARM-Data-Preparation" class="headerlink" title="ARM Data Preparation"></a>ARM Data Preparation</h1><p>First, calculate the saving goals rate(<code>rate_saved</code>) from clean_laliga_playerDF, and select variables of <code>season</code>, <code>teamName</code>, <code>position</code>, <code>game_minutes</code>, <code>rate_saved</code>, and <code>rating</code> to generate a new dataframe. Second, calculate the team’s points for each season(<code>PTS</code>) from the clean_laliga_teamDF CSV file and extract the columns of <code>season</code>, <code>teamName</code>, and <code>PTS</code> to generate a new dataframe. Then, using these two new datafram and merge them with teamName and season as ID. Next, the data of selecting only the goalkeeper’s position and picking the goalkeeper’s playing time is greater than 95 minutes (90 minutes is 1 game, so less than 95 has no reference significance, and it may directly exclude). After that, generating a new dataframe prepare for the next step. (As shown in the following figure, the first stage of data preparation is done) </p><p><img src="/ARM/data/1.jpg" alt="First Stage of Data Prepartion"></p><p>By following the above, based on the first stage, select variables of <code>game_minutes</code>, <code>rating</code>, <code>rate_saved</code>, and <code>PTS</code> to generate a new dataframe. Since these data are numeric data, so they need to be converted to transaction data.</p><p>The conversion rules are as follows:</p><p><img src="/ARM/data/2.JPEG" alt="Coversion Rules"></p><p>Converting the dataset to transaction data by following the rules above. Saving this dataframe in CSV format for exploring association rules.</p><p><img src="/ARM/data/3.jpg" alt="Transcation Data"></p><hr><h1 id="Resource"><a href="#Resource" class="headerlink" title="Resource:"></a>Resource:</h1><p><em><strong>Data Paparation Code<a href="https://github.com/HLeoF/laliga_machine_learning/blob/main/laligaProject/ARM/ARM_Data_Prep.R">R Code</a></strong></em><br><em><strong>Transcation Data<a href="https://github.com/HLeoF/laliga_machine_learning/blob/main/laligaProject/ARM/arm.csv">CSV File</a></strong></em></p>]]></content>
      
      
      <categories>
          
          <category> Association Rule Mining </category>
          
      </categories>
      
      
        <tags>
            
            <tag> Data Preparation </tag>
            
            <tag> Association Rule Mining </tag>
            
            <tag> Unsupervised Machine Learning </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>Association Rule Mininig Overview</title>
      <link href="/2024/02/20/arm-intro/"/>
      <url>/2024/02/20/arm-intro/</url>
      
        <content type="html"><![CDATA[<h1 id="Association-Rule-Mining"><a href="#Association-Rule-Mining" class="headerlink" title="Association Rule Mining"></a>Association Rule Mining</h1><p>Association Rule Mining is an unsupervised learning. The ARM algorithm can discover the relationship between items in the transaction dataset, and it can be applied to multiple scenarios in the real world. The best known example is shopping analytics, which digs into consumers’ transaction records to find correlations between products. As a result, it improves sales volume by recommending relevant products to customers. Therefore, ARM is an important and useful data analysis technique.</p><h1 id="The-Rules"><a href="#The-Rules" class="headerlink" title="The Rules"></a>The Rules</h1><p>The association rule represents the pattern found in the dataset. It can be represented by $X \to Y$. (It can be expressed using an if-then literal expression.). Here X is called <code>antecedent/left-hand-side</code> and Y is called <code>consequent/right-hand-side</code>. There are three commonly used metrics when Using ARM, which are <code>Support</code>, <code>confidence</code>, and <code>lift</code>. They can be used to quantify the association rules between things, so as to reflect the usefulness of the rules.</p><p><img src="/ARM/overview/1.png" alt="Association Rules"></p><p>Here is an example transaction table plot below, to prepare for introducing the support, confidence, and lift.</p><p><img src="/ARM/overview/2.png" alt="An Transaction Table Example"></p><h2 id="Support"><a href="#Support" class="headerlink" title="Support"></a>Support</h2><p>Assume a rule $Rice \to Chicken$ based on the figure above. $Support(Rice, Chicken)$ means how often items in $Rice$ and items in $Chicken$ occur together relative to all transactions. In other words, it represents the ratio of the number of product combinations of occurrences to the total number of occurrences.</p><p>$$Support &#x3D; \frac{frq(Rice, Chicken)}{N} &#x3D; \frac{2}{8} &#x3D; 0.25$$</p><h2 id="Confidence"><a href="#Confidence" class="headerlink" title="Confidence"></a>Confidence</h2><p>Using the same rule above $Rice \to Chicken$. $Confidence(Rice, Chicken)$ means how often items in $Rice$ and items in $Chicken$ occur together relative to transactions that contain Rice. In other words, it represents the probability that when a user buys Rice, the user will purchase Chicken. </p><p>$$Confidence &#x3D; \frac{frq(Rice, Chicken)}{frq(Rice)} &#x3D; \frac{2}{4} &#x3D; 0.5$$</p><h2 id="Lift"><a href="#Lift" class="headerlink" title="Lift"></a>Lift</h2><p>Still Using the same rule above $Rice \to Chicken$, $Lift(Rice, Chicken)$ means the extent to which the appearance of $Rice$ increases the appearance probability of $Chicken$.</p><p>$$Lift &#x3D; \frac{Support(Rice,Chicken)}{Support(Rice) * Support(Chicken)} &#x3D; \frac{0.25}{0.5 * 0.25} &#x3D; 2 $$</p><h1 id="Apriori-Algorithm"><a href="#Apriori-Algorithm" class="headerlink" title="Apriori Algorithm"></a>Apriori Algorithm</h1><p>Apriori Algorithm is one of the most common algorithms used by association rule mining to find frequent itemsets. These frequent itemsets help data analysts make some decisions. Using Support, Confidence, or Lift to evaluate itemsets. The goal of Apriori is to find the maximum set of K frequent itemsets. Here is an example below, using Support as a criterion for evaluating frequent itemsets. After that, Apriori uses an iterative method to find the candidate itemset and its corresponding support and drop out item set with lower support to obtain frequent itemset and so on.</p><p><img src="/ARM/overview/3.png" alt="How Apriori Algorithm Work"></p><h1 id="Plan-For-The-Project"><a href="#Plan-For-The-Project" class="headerlink" title="Plan For The Project"></a>Plan For The Project</h1><p>Focusing on exploring the impact of a goalkeeper’s save ability on a club’s ranking. Selecting the features of conceding goals, the ratio of goals saving, the game minutes, performance rating, and the club ranking, then using the ARM to study the correlation between the goalkeeper’s saving ability and the team’s ranking. Also, setting minimum support, confidence and other parameters ensures the reliability of the association rules have been discovered. Finally, using frequent itemset analyze the relationship between goalkeepers ‘saving ability and clubs’ ranking.</p><hr><h1 id="Resource"><a href="#Resource" class="headerlink" title="Resource"></a>Resource</h1><p>Image 1: <a href="https://images.app.goo.gl/88PuEgtbmvfMNzXW7">https://images.app.goo.gl/88PuEgtbmvfMNzXW7</a></p><p>Image 2: <a href="https://images.app.goo.gl/8KXKYytYNBonLcz78">https://images.app.goo.gl/8KXKYytYNBonLcz78</a></p><p>Image 3: <a href="https://www.cnblogs.com/pinard/p/6293298.html">https://www.cnblogs.com/pinard/p/6293298.html</a></p>]]></content>
      
      
      <categories>
          
          <category> Association Rule Mining </category>
          
      </categories>
      
      
        <tags>
            
            <tag> Association Rule Mining </tag>
            
            <tag> Unsupervised Machine Learning </tag>
            
            <tag> Overview </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>Clustring Conclusion</title>
      <link href="/2024/02/20/clust-conclu/"/>
      <url>/2024/02/20/clust-conclu/</url>
      
        <content type="html"><![CDATA[<p><img src="/clustring/results/7.jpeg" alt="La Liga Clubs"></p><p>All in all, there exists a relationship between the quality of a player’s shooting and a club’s ranking, but the relationship is not conclusive. The number of shots, the number of shots on, and goals scored by players can sometimes affect the outcome and ranking of a club, but this effect is only a small part of the factors. Thus, no matter how perfect a player’s shooting quality is, it does not mean that his team will achieve better results. For example, Celta’s Iago Aspas has goal-scoring and shot quality well in the 2020-2021 season, but his team is still in the mid-table. Therefore, It cannot directly judge the team’s results by quality shooting factors.</p><hr><h1 id="Resouce"><a href="#Resouce" class="headerlink" title="Resouce:"></a>Resouce:</h1><p>image: <a href="https://images.app.goo.gl/dA3Yzg3yB7nDaxeN9">https://images.app.goo.gl/dA3Yzg3yB7nDaxeN9</a></p>]]></content>
      
      
      <categories>
          
          <category> Clutersing </category>
          
      </categories>
      
      
        <tags>
            
            <tag> Conclusion </tag>
            
            <tag> Unsupervised Machine Learning </tag>
            
            <tag> Clustring </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>Clustring Results</title>
      <link href="/2024/02/20/clust-result/"/>
      <url>/2024/02/20/clust-result/</url>
      
        <content type="html"><![CDATA[<h1 id="K-Means-Clustering"><a href="#K-Means-Clustering" class="headerlink" title="K-Means Clustering"></a>K-Means Clustering</h1><p>Before the k-means analysis, the appropriate K value needs to be selected. The methods used here are the Elbow method and the Silhouette method and picking two k values by them. Also, choosing another k value randomly. After that, using these k values to process k-means clustering and show the results.</p><p><img src="/clustring/results/1.png" alt="Elbow and Silhouette Methods - K Values"></p><p>According to the optimal k-value plot above, the optimal k-value of the Elbow method is <strong>3</strong> and the optimal k-value of the Silhouette method is <strong>2</strong>.</p><p>Therefore, Using k-values <code>2</code>, <code>3</code>, and randomly picking k-value <code>4</code> to perform  K-means clustering. </p><p><img src="/clustring/results/2.png" alt="K Means Clustering For Each K-Value"></p><p><img src="/clustring/results/5.png" alt="K Means Clustering Exploring 2020 Season"></p><p>The above is the K-means cluster plot and the plot of the number of each cluster for each club in the 2020 season according to the different K-means plots. Using these two figures to determine the appropriate k value and explore the relationship between the quality of players’ shooting and the team ranking.  The yellow cluster is used here to determine whether the k value is appropriate, and the yellow one represents the players with better shooting quality.</p><p>When K &#x3D; 2, it shows “2020 Season – 2 clusters” in the second plot, it does not do a good job of displaying whether a player’s shooting quality is related to clubs’ ranking&#x2F;wins.  As mentioned above, the yellow cluster represents players with better shooting quality, while Cluster 1 represents players with average-level shooting quality.  Interestingly, the three relegated clubs, Eibar, Valladolid, and Huesca, had more good quality shooting than La Liga Champions Atletico Madrid.  Therefore, processing clustering analysis based on k value 2 may not be a good option.</p><p>The subplot “2020 Season – 4 Cluster” in the second figure may work better when K &#x3D; 4 than K value is 2. However, it still does not do a prefect performance of showing the relationship between a players’ shooting quality and a teams’ ranking&#x2F;win. For example, Barcelona has more players in the yellow cluster than Atletico Madrid, but Barce is ranked lower than Atletico Madrid.</p><p>The subplot “2020 Season – 3 Clusters” in the second plot works better when K &#x3D; 3 than when K &#x3D; 2 and 4. From that subplot, it is clearly obvious that Atletico Madrid has far more people in the yellow cluster than any other club. Thus, the k value is 3 is relatively effective when performing cluster analysis. </p><h1 id="Hierarchical-clustering"><a href="#Hierarchical-clustering" class="headerlink" title="Hierarchical clustering"></a>Hierarchical clustering</h1><p>The following Dendrogram shows the effect of hierarchical clustering using the Cosin Similarity maximum distance calculation and the complete linkage algorithm.</p><p><img src="/clustring/results/3.png" alt="The Original Dendrogram"></p><p>The signs shown in the plot are small and hard to read.  In order to deal with this issue, using current () in R cut the tree structure by height to divide the multiple group.  It is helpful to observe the clustering of the dendrogram.</p><p><img src="/clustring/results/4.png" alt="After cutting a group of the original dendrogam"></p><p>The above plot represents splitting from a height of 0.3 and displays the first group data after the division. After splitting, all of the signs of this group can be clearly seen.   Therefore, this method may be able to study dendrogram in-depth.   The K value cannot be determined directly by the cutoff point(height) on the tree.   For example, according to the original dendrogram, choosing a height of approximately 1.8~1.9 is a good choice.   Thus, the K value is 3 based on this height.</p><h3 id="K-means-and-hclust-comparison"><a href="#K-means-and-hclust-comparison" class="headerlink" title="K-means and hclust comparison"></a>K-means and hclust comparison</h3><p><img src="/clustring/results/6.jpg" alt="Hclust - Cluster(the player with the best shooting quality) When k = 3"></p><p>After applying K-means clustering and hierarchical clustering, there are some differences between them. According to the above content, K-means can use the elbow method, silhouette method, or gap statistics to pick the best K-value, and process k-means clustering based on these K values. After that, analyze whether the player’s shooting quality is related to the clubs’ ranking of each season according to the k-means clustering results. Different from K-means, hierarchical clustering requires using cosine similarity as distance to process clustering. If you want to determine the k value based on hierarchical clustering, you may need to determine the best k value based on the cut point of the tree plot, so that data is divided into different clusters.  For example, in this case, the tree is divided into clusters according to the k &#x3D; 3, and the cluster the player with the best shooting quality. Comparing with the yellow cluster when k &#x3D; 3 in k-means. In K-means, when k &#x3D; 3, the players who appear most in the yellow cluster are Atletico Madrid players, but there is not any player of Atletico Madrid who appears in the hierarchical cluster. Therefore, if the dendrogram is clustered based on the k value, the results may be quite different from the result of K-means.</p>]]></content>
      
      
      <categories>
          
          <category> Clutersing </category>
          
      </categories>
      
      
        <tags>
            
            <tag> Unsupervised Machine Learning </tag>
            
            <tag> Results </tag>
            
            <tag> Clustring </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>Clustring Code</title>
      <link href="/2024/02/20/clust-code/"/>
      <url>/2024/02/20/clust-code/</url>
      
        <content type="html"><![CDATA[<h1 id="Python-Code-for-K-Means-Clustering"><a href="#Python-Code-for-K-Means-Clustering" class="headerlink" title="Python Code for K-Means Clustering"></a>Python Code for K-Means Clustering</h1><p><em><strong>Here is the K-Means code like: <a href="https://github.com/HLeoF/laliga_machine_learning/blob/main/laligaProject/clustering/K-means.py">Python Code</a></strong></em></p><pre class="language-python" data-language="python"><code class="language-python"><span class="token keyword">import</span> pandas <span class="token keyword">as</span> pd<span class="token keyword">import</span> matplotlib<span class="token punctuation">.</span>pyplot <span class="token keyword">as</span> plt<span class="token keyword">from</span> sklearn<span class="token punctuation">.</span>cluster <span class="token keyword">import</span> KMeans<span class="token keyword">from</span> sklearn<span class="token punctuation">.</span>preprocessing <span class="token keyword">import</span> StandardScaler<span class="token keyword">from</span> sklearn<span class="token punctuation">.</span>metrics <span class="token keyword">import</span> silhouette_scoreclustering_df <span class="token operator">=</span> pd<span class="token punctuation">.</span>read_csv<span class="token punctuation">(</span><span class="token string">"clustering_analysis_df.csv"</span><span class="token punctuation">)</span><span class="token comment">######################### K-Means Clustering ##############</span>X <span class="token operator">=</span> clustering_df<span class="token punctuation">[</span><span class="token punctuation">[</span><span class="token string">'shots_total'</span><span class="token punctuation">,</span><span class="token string">'shots_on'</span><span class="token punctuation">,</span><span class="token string">'goals_total'</span><span class="token punctuation">]</span><span class="token punctuation">]</span>scaler <span class="token operator">=</span> StandardScaler<span class="token punctuation">(</span><span class="token punctuation">)</span>scale_X <span class="token operator">=</span> scaler<span class="token punctuation">.</span>fit_transform<span class="token punctuation">(</span>X<span class="token punctuation">)</span><span class="token comment">######################### K Value Selection ###############</span>wcss <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token punctuation">]</span>score <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token number">0.0</span><span class="token punctuation">]</span><span class="token comment">#### Elbow Method #########################################</span><span class="token keyword">for</span> i <span class="token keyword">in</span> <span class="token builtin">range</span><span class="token punctuation">(</span><span class="token number">1</span><span class="token punctuation">,</span> <span class="token number">11</span><span class="token punctuation">)</span><span class="token punctuation">:</span>  model <span class="token operator">=</span> KMeans<span class="token punctuation">(</span>n_clusters<span class="token operator">=</span>i<span class="token punctuation">)</span>  labels <span class="token operator">=</span> model<span class="token punctuation">.</span>fit_predict<span class="token punctuation">(</span>X<span class="token punctuation">)</span>  wcss<span class="token punctuation">.</span>append<span class="token punctuation">(</span>model<span class="token punctuation">.</span>inertia_<span class="token punctuation">)</span><span class="token comment">########## Silhouette Method #############################</span><span class="token keyword">for</span> i <span class="token keyword">in</span> <span class="token builtin">range</span><span class="token punctuation">(</span><span class="token number">2</span><span class="token punctuation">,</span> <span class="token number">11</span><span class="token punctuation">)</span><span class="token punctuation">:</span>  model <span class="token operator">=</span> KMeans<span class="token punctuation">(</span>n_clusters<span class="token operator">=</span>i<span class="token punctuation">)</span>  labels <span class="token operator">=</span> model<span class="token punctuation">.</span>fit_predict<span class="token punctuation">(</span>X<span class="token punctuation">)</span>  scores <span class="token operator">=</span> silhouette_score<span class="token punctuation">(</span>X<span class="token punctuation">,</span>model<span class="token punctuation">.</span>labels_<span class="token punctuation">)</span>  score<span class="token punctuation">.</span>append<span class="token punctuation">(</span>scores<span class="token punctuation">)</span>fig<span class="token punctuation">,</span> <span class="token punctuation">(</span>ax1<span class="token punctuation">,</span> ax2<span class="token punctuation">)</span> <span class="token operator">=</span> plt<span class="token punctuation">.</span>subplots<span class="token punctuation">(</span><span class="token number">1</span><span class="token punctuation">,</span> <span class="token number">2</span><span class="token punctuation">,</span> figsize<span class="token operator">=</span><span class="token punctuation">(</span><span class="token number">12</span><span class="token punctuation">,</span> <span class="token number">5</span><span class="token punctuation">)</span><span class="token punctuation">)</span>ax1<span class="token punctuation">.</span>plot<span class="token punctuation">(</span><span class="token builtin">range</span><span class="token punctuation">(</span><span class="token number">1</span><span class="token punctuation">,</span> <span class="token number">11</span><span class="token punctuation">)</span><span class="token punctuation">,</span> wcss<span class="token punctuation">,</span> marker<span class="token operator">=</span><span class="token string">'o'</span><span class="token punctuation">)</span>ax1<span class="token punctuation">.</span>axvline<span class="token punctuation">(</span>x<span class="token operator">=</span><span class="token number">3</span><span class="token punctuation">,</span> color<span class="token operator">=</span><span class="token string">'r'</span><span class="token punctuation">,</span> linestyle<span class="token operator">=</span><span class="token string">'--'</span><span class="token punctuation">)</span>ax1<span class="token punctuation">.</span>set_xlabel<span class="token punctuation">(</span><span class="token string">'Number of clusters K'</span><span class="token punctuation">)</span>ax1<span class="token punctuation">.</span>set_ylabel<span class="token punctuation">(</span><span class="token string">'WCSS'</span><span class="token punctuation">)</span>ax1<span class="token punctuation">.</span>set_title<span class="token punctuation">(</span><span class="token string">'Elbow Method'</span><span class="token punctuation">)</span>ax2<span class="token punctuation">.</span>plot<span class="token punctuation">(</span><span class="token builtin">range</span><span class="token punctuation">(</span><span class="token number">1</span><span class="token punctuation">,</span> <span class="token number">11</span><span class="token punctuation">)</span><span class="token punctuation">,</span> score<span class="token punctuation">,</span> marker<span class="token operator">=</span><span class="token string">'o'</span><span class="token punctuation">)</span>ax2<span class="token punctuation">.</span>axvline<span class="token punctuation">(</span>x<span class="token operator">=</span><span class="token number">2</span><span class="token punctuation">,</span> color<span class="token operator">=</span><span class="token string">'r'</span><span class="token punctuation">,</span> linestyle<span class="token operator">=</span><span class="token string">'--'</span><span class="token punctuation">)</span>ax2<span class="token punctuation">.</span>set_xlabel<span class="token punctuation">(</span><span class="token string">'Number of clusters K'</span><span class="token punctuation">)</span>ax2<span class="token punctuation">.</span>set_ylabel<span class="token punctuation">(</span><span class="token string">'Silhouette Score'</span><span class="token punctuation">)</span>ax2<span class="token punctuation">.</span>set_title<span class="token punctuation">(</span><span class="token string">'Silhouette Method'</span><span class="token punctuation">)</span>plt<span class="token punctuation">.</span>tight_layout<span class="token punctuation">(</span><span class="token punctuation">)</span>plt<span class="token punctuation">.</span>show<span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token comment">############# K-Mean Visualization ###########################</span>df2 <span class="token operator">=</span> clustering_df<span class="token punctuation">.</span>copy<span class="token punctuation">(</span><span class="token punctuation">)</span>model2 <span class="token operator">=</span> KMeans<span class="token punctuation">(</span>n_clusters<span class="token operator">=</span><span class="token number">2</span><span class="token punctuation">)</span>labels2 <span class="token operator">=</span> model2<span class="token punctuation">.</span>fit_predict<span class="token punctuation">(</span>X<span class="token punctuation">)</span>df2<span class="token punctuation">[</span><span class="token string">"cluster"</span><span class="token punctuation">]</span> <span class="token operator">=</span> labels2df3 <span class="token operator">=</span> clustering_df<span class="token punctuation">.</span>copy<span class="token punctuation">(</span><span class="token punctuation">)</span>model3 <span class="token operator">=</span> KMeans<span class="token punctuation">(</span>n_clusters<span class="token operator">=</span><span class="token number">3</span><span class="token punctuation">)</span>labels3 <span class="token operator">=</span> model3<span class="token punctuation">.</span>fit_predict<span class="token punctuation">(</span>X<span class="token punctuation">)</span>df3<span class="token punctuation">[</span><span class="token string">"cluster"</span><span class="token punctuation">]</span> <span class="token operator">=</span> labels3df4 <span class="token operator">=</span> clustering_df<span class="token punctuation">.</span>copy<span class="token punctuation">(</span><span class="token punctuation">)</span>model4 <span class="token operator">=</span> KMeans<span class="token punctuation">(</span>n_clusters<span class="token operator">=</span><span class="token number">4</span><span class="token punctuation">)</span>labels4 <span class="token operator">=</span> model4<span class="token punctuation">.</span>fit_predict<span class="token punctuation">(</span>X<span class="token punctuation">)</span>df4<span class="token punctuation">[</span><span class="token string">"cluster"</span><span class="token punctuation">]</span> <span class="token operator">=</span> labels4fig<span class="token punctuation">,</span> <span class="token punctuation">(</span>ax1<span class="token punctuation">,</span> ax2<span class="token punctuation">,</span> ax3<span class="token punctuation">)</span> <span class="token operator">=</span> plt<span class="token punctuation">.</span>subplots<span class="token punctuation">(</span><span class="token number">1</span><span class="token punctuation">,</span> <span class="token number">3</span><span class="token punctuation">,</span> figsize<span class="token operator">=</span><span class="token punctuation">(</span><span class="token number">15</span><span class="token punctuation">,</span> <span class="token number">5</span><span class="token punctuation">)</span><span class="token punctuation">)</span>ax1<span class="token punctuation">.</span>scatter<span class="token punctuation">(</span>df2<span class="token punctuation">[</span><span class="token string">'shots_total'</span><span class="token punctuation">]</span><span class="token punctuation">,</span>df2<span class="token punctuation">[</span><span class="token string">'shots_on'</span><span class="token punctuation">]</span><span class="token punctuation">,</span>c <span class="token operator">=</span> df2<span class="token punctuation">[</span><span class="token string">'cluster'</span><span class="token punctuation">]</span><span class="token punctuation">)</span>ax1<span class="token punctuation">.</span>set_xlabel<span class="token punctuation">(</span><span class="token string">"Shots Total"</span><span class="token punctuation">)</span>ax1<span class="token punctuation">.</span>set_ylabel<span class="token punctuation">(</span><span class="token string">"Shots On"</span><span class="token punctuation">)</span>ax1<span class="token punctuation">.</span>set_title<span class="token punctuation">(</span><span class="token string">"K Value = 2 &amp; Silhouette Method"</span><span class="token punctuation">)</span>ax2<span class="token punctuation">.</span>scatter<span class="token punctuation">(</span>df3<span class="token punctuation">[</span><span class="token string">'shots_total'</span><span class="token punctuation">]</span><span class="token punctuation">,</span>df3<span class="token punctuation">[</span><span class="token string">'shots_on'</span><span class="token punctuation">]</span><span class="token punctuation">,</span>c <span class="token operator">=</span> df3<span class="token punctuation">[</span><span class="token string">'cluster'</span><span class="token punctuation">]</span><span class="token punctuation">)</span>ax2<span class="token punctuation">.</span>set_xlabel<span class="token punctuation">(</span><span class="token string">"Shots Total"</span><span class="token punctuation">)</span>ax2<span class="token punctuation">.</span>set_ylabel<span class="token punctuation">(</span><span class="token string">"Shots On"</span><span class="token punctuation">)</span>ax2<span class="token punctuation">.</span>set_title<span class="token punctuation">(</span><span class="token string">"K Value = 3 &amp; Elbow Method"</span><span class="token punctuation">)</span>ax3<span class="token punctuation">.</span>scatter<span class="token punctuation">(</span>df4<span class="token punctuation">[</span><span class="token string">'shots_total'</span><span class="token punctuation">]</span><span class="token punctuation">,</span>df4<span class="token punctuation">[</span><span class="token string">'shots_on'</span><span class="token punctuation">]</span><span class="token punctuation">,</span>c <span class="token operator">=</span> df4<span class="token punctuation">[</span><span class="token string">'cluster'</span><span class="token punctuation">]</span><span class="token punctuation">)</span>ax3<span class="token punctuation">.</span>set_xlabel<span class="token punctuation">(</span><span class="token string">"Shots Total"</span><span class="token punctuation">)</span>ax3<span class="token punctuation">.</span>set_ylabel<span class="token punctuation">(</span><span class="token string">"Shots On"</span><span class="token punctuation">)</span>ax3<span class="token punctuation">.</span>set_title<span class="token punctuation">(</span><span class="token string">"K Value = 4 &amp; Random Picking"</span><span class="token punctuation">)</span>plt<span class="token punctuation">.</span>tight_layout<span class="token punctuation">(</span><span class="token punctuation">)</span>plt<span class="token punctuation">.</span>show<span class="token punctuation">(</span><span class="token punctuation">)</span></code></pre><h1 id="R-Code-For-hierarchical-clustering"><a href="#R-Code-For-hierarchical-clustering" class="headerlink" title="R Code For hierarchical clustering"></a>R Code For hierarchical clustering</h1><p><em><strong>Here is the Hclust Code: <a href="https://github.com/HLeoF/laliga_machine_learning/blob/main/laligaProject/clustering/hclust.R">R Code</a></strong></em></p><pre class="language-R" data-language="R"><code class="language-R">#install.packages(&quot;stylo&quot;)#install.packages(&quot;factoextra&quot;)library(tidyverse)library(cluster)library(factoextra)library(stylo) ## for using dis cosine# Set the absolute file pathsetwd(&quot;D:&#x2F;clustering&quot;)#Read the csv filehclust_df &lt;- read.csv(&#39;clustering_analysis_df.csv&#39;)#Select shots_total, shots_on, and goals_total variablesdata &lt;- hclust_df[, 5:7]data_scl &lt;- scale(data) # scale datadist_df &lt;- stylo::dist.cosine(data_scl) # compute cosine Cosine Similarityhc &lt;- hclust(dist_df, method &#x3D; &quot;complete&quot;) # using copplot(hc, cex &#x3D; 0.1, hang &#x3D; -1, main &#x3D; &quot;Cosine&quot;,labels &#x3D; hclust_df$playerName)tree_height &lt;-0.3 # cut tree height from the original hclustclus &lt;- cutree(hc, h &#x3D; tree_height)temp &lt;- data[clus &#x3D;&#x3D; 1, ]temp_dist &lt;- stylo::dist.cosine(scale(temp)) temp_hc &lt;- hclust(temp_dist, method &#x3D; &quot;complete&quot;)l &lt;- hclust_df$playerName[clus &#x3D;&#x3D; 1]plot(temp_hc, cex &#x3D; 0.5, hang &#x3D; -30, main &#x3D; &quot;Cosine&quot;, labels &#x3D; l)</code></pre>]]></content>
      
      
      <categories>
          
          <category> Clutersing </category>
          
      </categories>
      
      
        <tags>
            
            <tag> Unsupervised Machine Learning </tag>
            
            <tag> Code </tag>
            
            <tag> Clustring </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>Clustring Data Preparation</title>
      <link href="/2024/02/20/clust-data/"/>
      <url>/2024/02/20/clust-data/</url>
      
        <content type="html"><![CDATA[<h1 id="Data-Preparation"><a href="#Data-Preparation" class="headerlink" title="Data Preparation"></a>Data Preparation</h1><h2 id="Dataframes-Before-Transforming"><a href="#Dataframes-Before-Transforming" class="headerlink" title="Dataframes Before Transforming"></a>Dataframes Before Transforming</h2><p>Before processing Clustering analysis, it is necessary to extract the data required for Clustering analysis from the previously cleaned datasets (<a href="https://github.com/HLeoF/laliga_machine_learning/blob/main/laligaProject/clean_laliga_playerDF.csv">Players Datasets</a> &amp; <a href="https://github.com/HLeoF/laliga_machine_learning/blob/main/laligaProject/clean_laliga_teamDF.csv">Clubs Dataset</a>) and combine the extracted data in a dataframe. It can be used for analysis. The figure below shows what the two datasets looked like before they were extracted and merged. </p><p><img src="/clustring/data/1.jpg" alt="Cleaned La Liga Players Dataset"></p><p><img src="/clustring/data/2.jpg" alt="Cleaned La Liga Clubs Dataset"></p><p>This clustering analysis just focuses on the relationship between players’ shooting quality and the team’s performance(<a href="https://hleof.github.io/2024/02/20/clust-intro/#Clustering-Plan">Clusetring Plan</a>). Therefore, Extracting the variables: <code>teanName</code>, <code>playerName</code>, <code>position</code>, <code>shots_total</code>,<code>shots_on</code>, and <code>goals_total</code> from the player dataset. <strong>The main reason for needing position variables is to drop the goalkeepers’ data because the goalkeepers are not involved in the attack or shooting for a game. Players in this position do not need to be considered in the analysis.</strong> For the clubs’ dataset, after calculating the points for each club per season and generating a new column called PTS(<em><strong>3 Points for a win, 1 Point for a draw, and 0 points for a loss</strong></em>), all extracted data can be combined into a data frame and ready for next step.</p><p><img src="/clustring/data/4.jpg" alt="New Merged DataFrame"></p><h2 id="DataFrame-After-Transforming"><a href="#DataFrame-After-Transforming" class="headerlink" title="DataFrame After Transforming"></a>DataFrame After Transforming</h2><p>According to the above Merge Dataframe, picking shots_total, shots_on, and goal_total as eigenvalue for this clustering analysis. These three variables are both unlabeled numeric data and are suitable for processing clustering analysis. </p><p><img src="/clustring/data/3.jpg" alt="Data For Clustering Analysis"></p><p>After that, it may use following code to transform and scale these data and get ready to implement clustering algorithms.</p><pre class="language-python" data-language="python"><code class="language-python">X <span class="token operator">=</span> clustering_df<span class="token punctuation">[</span><span class="token punctuation">[</span><span class="token string">'shots_total'</span><span class="token punctuation">,</span><span class="token string">'shots_on'</span><span class="token punctuation">,</span><span class="token string">'goals_total'</span><span class="token punctuation">]</span><span class="token punctuation">]</span>scaler <span class="token operator">=</span> StandardScaler<span class="token punctuation">(</span><span class="token punctuation">)</span>scale_X <span class="token operator">=</span> scaler<span class="token punctuation">.</span>fit_transform<span class="token punctuation">(</span>X<span class="token punctuation">)</span></code></pre><p><img src="/clustring/data/5.jpg" alt="variables tranfrom and scale"></p><p>After finishing the clustering analysis, other variables in the merged dataframe will be used for in-depth explore the relationship between players’ shooting quality and the team’s performance. </p>]]></content>
      
      
      <categories>
          
          <category> Clutersing </category>
          
      </categories>
      
      
        <tags>
            
            <tag> Data Preparation </tag>
            
            <tag> Unsupervised Machine Learning </tag>
            
            <tag> Clustring </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>Clustring Method Overview</title>
      <link href="/2024/02/20/clust-intro/"/>
      <url>/2024/02/20/clust-intro/</url>
      
        <content type="html"><![CDATA[<h1 id="Clustering-Analysis"><a href="#Clustering-Analysis" class="headerlink" title="Clustering Analysis"></a>Clustering Analysis</h1><p>Clustering is an unsupervised learning. It can divide the objects of analysis into different groups based on their features, in other words dividing the data in the dataset into clusters with similar characteristics. The goal lets data within a category to be more similar than data between different categories. Clustering analysis is different from classification, which is a supervised learning method that requires learning a classification from a training dataset. Clustering analysis is widely used in the real world, it can be used in computer image recognition, medical image analysis, market research, commodity classification, etc.</p><h2 id="Partitioning-Clustering-VS-Hierarchical-Clustering"><a href="#Partitioning-Clustering-VS-Hierarchical-Clustering" class="headerlink" title="Partitioning Clustering VS. Hierarchical Clustering"></a>Partitioning Clustering VS. Hierarchical Clustering</h2><p>Clustering analysis has two types, which are Partitioning clustering and hierarchical clustering. Partitioning clustering is not hierarchical, it has not explicit structure between data to show that they are related to each other. K-Means and K-Medoids are the most common useful partitioning algorithms. Hierarchical clustering shows a hierarchical tree structure where each node represents a cluster. This method gradually merged data (<code>Agglomerative Clustering</code>) or divided (<code>Divisive Clustering</code>) until all the data was clustered together. It does not require the number of clusters (<code>K values</code>) to be specified in advance. Single-linkage, Complete-linkage, and Connectivity-based clustering are the most common algorithms of Hierarchical clustering. The time complexity of partitioning clustering is relatively low compared to the hierarchical distance, especially in the case of large data volume, because hierarchical clustering needs to consider the distance or similarity between the data for each step.</p><p><img src="/clustring/overview/1.png" alt="Partitioning Clustering Example"></p><p><img src="/clustring/overview/2.png" alt="Hierarchical Clustering Example"></p><p>The plots above show the difference between the two categories of clustering. The Euclidean distance is used here, which is calculated straight-line distance between two points. The advantage of the Euclidean method is that is relatively simple to implement and intuitive. If a dataset is a low-dimensional dataset, the effect of using it is perfect. The dataset used in these two plots is low-dimensional(dataset).</p><p>$$\text{Euclidean Distance} &#x3D; d(x,y) &#x3D; \sqrt{\sum_{i&#x3D;1}^{n} (x_{i}-y_{i})^2} $$</p><p>The most obvious difference between these two plots, as mentioned above, is that they show different structures. Partitioning clustering does not have a clear structure, and it can only be distinguished clusters by color and space.  The plot of hierarchical clustering can show the division of clusters by tree structure. Using the K &#x3D; 3 to display clusters, the partitioning and hierarchical plots have different amounts of data in each cluster. When using clustering analysis, may selecting different categories of clustering meets needs. For example, the partitioning method is a good choice when analyzing large-scale datasets, it is often more efficient and faster to perform. The hierarchical method is an option when exploring the structure of data clustering. It is suitable for working with small or medium-scale datasets, but it is expensive to work with large-scale datasets.</p><h1 id="Clustering-Plan"><a href="#Clustering-Plan" class="headerlink" title="Clustering Plan"></a>Clustering Plan</h1><p>Finding the relationship between the shooting quality efficiency of players in La Liga and the results of matches is explored by using clustering analysis. Selecting indexes include the total number of shots, the number of shots, the total number of goals, and the total number, which are important features to evaluate the quality and efficiency of the players’ shots.</p><p>Using K-mean algorithms and hierarchical clustering method to cluster the shooting indicators of players. Through these two algorithms, they are possible to find differences in shooting performance between different groups and explore whether shooting performance between different levels of players is correlated with match results and club rankings. It is super helpful to get a complete understanding of the impact of shooting quality on a club’s results. At the same time, compare the clustering effect produced by K-means and hierarchical clustering algorithm respectively to determine which method is more suitable for this project.</p><hr><h1 id="Resource"><a href="#Resource" class="headerlink" title="Resource"></a>Resource</h1><p><em><strong>Example Dataset<a href="https://github.com/HLeoF/laliga_machine_learning/blob/main/laligaProject/clustering/example/text.csv">Dataset</a></strong></em></p><p><em><strong>Example K-Means Python Code<a href="https://github.com/HLeoF/laliga_machine_learning/blob/main/laligaProject/clustering/example/clustring.py">K-Means Code</a></strong></em></p><p><em><strong>Example Hierarchical Clustring R Code<a href="https://github.com/HLeoF/laliga_machine_learning/blob/main/laligaProject/clustering/example/hclust.R">Hierarchical Clustring Code</a></strong></em></p>]]></content>
      
      
      <categories>
          
          <category> Clutersing </category>
          
      </categories>
      
      
        <tags>
            
            <tag> Unsupervised Machine Learning </tag>
            
            <tag> Clustring </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>Data Gathering, Cleaning, and Preparation</title>
      <link href="/2024/02/04/DataPrep/"/>
      <url>/2024/02/04/DataPrep/</url>
      
        <content type="html"><![CDATA[<h1 id="Gathering-Data"><a href="#Gathering-Data" class="headerlink" title="Gathering Data"></a>Gathering Data</h1><p>Some datasets available on the website are suitable for meeting needs (either a single season or only up to 2020). Therefore, in order to get the latest seasons from 2020-2023, just using APIs to gather data and create datasets is a good option. Finding an API calls <code>api-football</code> from the <code>rapidapi&#39;</code>‘s website and using it to get all the data. This API provides rich data of La Liga players and clubs. Obtaining data has wonderful acquisition and accuracy. After gathering data from this API, create two unique datasets: one for players’s data, and another one for clubs’ data.</p><h2 id="API-Sample-Code"><a href="#API-Sample-Code" class="headerlink" title="API Sample Code"></a>API Sample Code</h2><ol><li><p>The example code below shows the API to get the various data of FC Barcelona’s players in La Liga from 2022-2023. Using this API to get all player’s data for La Liga from 2020-2023. </p><pre class="language-python" data-language="python"><code class="language-python"><span class="token keyword">import</span> requests<span class="token comment">#endpoint</span>url <span class="token operator">=</span> <span class="token string">"https://api-football-v1.p.rapidapi.com/v3/players"</span><span class="token comment">#to find the players'data in FC Barcelona 2020</span><span class="token comment"># 529 means Barcelona</span><span class="token comment"># 140 means Laliga</span><span class="token comment"># season means 2020 year</span>query <span class="token operator">=</span> <span class="token punctuation">&#123;</span><span class="token string">"team"</span><span class="token punctuation">:</span><span class="token string">"529"</span><span class="token punctuation">,</span><span class="token string">"league"</span><span class="token punctuation">:</span><span class="token string">"140"</span><span class="token punctuation">,</span><span class="token string">"season"</span><span class="token punctuation">:</span><span class="token string">"2020"</span><span class="token punctuation">&#125;</span>headers <span class="token operator">=</span> <span class="token punctuation">&#123;</span>    <span class="token string">"X-RapidAPI-Key"</span><span class="token punctuation">:</span> Your_key<span class="token punctuation">,</span> <span class="token comment"># Your private API key</span>    <span class="token string">"X-RapidAPI-Host"</span><span class="token punctuation">:</span> <span class="token string">"api-football-v1.p.rapidapi.com"</span><span class="token punctuation">&#125;</span>response <span class="token operator">=</span> requests<span class="token punctuation">.</span>get<span class="token punctuation">(</span>url<span class="token punctuation">,</span> headers<span class="token operator">=</span>headers<span class="token punctuation">,</span> params<span class="token operator">=</span>query<span class="token punctuation">)</span>response<span class="token punctuation">.</span>text</code></pre><p> Run code, it shows the players’ data of FC Barcelona(click picture for <strong>zoom in</strong>)<br> <img src="/dataPrep/1.jpg" alt="Players Data From FC Barcelona (JSON)"></p></li><li><p>The example code below shows the API get various data of Barcelona (include wins, loses, draws, goal for, goal against, etc for each season) for La Liga from 2020-2023.</p><pre class="language-python" data-language="python"><code class="language-python"><span class="token keyword">import</span> requestsurl <span class="token operator">=</span> <span class="token string">"https://api-football-v1.p.rapidapi.com/v3/teams/statistics"</span><span class="token comment"># Getting the data of FC Barcelona in 2020</span><span class="token comment"># 529 means Barcelona</span><span class="token comment"># 140 means Laliga</span><span class="token comment"># season means 2020 year</span>query <span class="token operator">=</span> <span class="token punctuation">&#123;</span><span class="token string">"league"</span><span class="token punctuation">:</span><span class="token string">"140"</span><span class="token punctuation">,</span><span class="token string">"season"</span><span class="token punctuation">:</span><span class="token string">"2020"</span><span class="token punctuation">,</span><span class="token string">"team"</span><span class="token punctuation">:</span><span class="token string">"529"</span><span class="token punctuation">&#125;</span>headers <span class="token operator">=</span> <span class="token punctuation">&#123;</span>    <span class="token string">"X-RapidAPI-Key"</span><span class="token punctuation">:</span> Your_key<span class="token punctuation">,</span>    <span class="token string">"X-RapidAPI-Host"</span><span class="token punctuation">:</span> <span class="token string">"api-football-v1.p.rapidapi.com"</span><span class="token punctuation">&#125;</span>response <span class="token operator">=</span> requests<span class="token punctuation">.</span>get<span class="token punctuation">(</span>url<span class="token punctuation">,</span> headers<span class="token operator">=</span>headers<span class="token punctuation">,</span> params<span class="token operator">=</span>query<span class="token punctuation">)</span>response<span class="token punctuation">.</span>text</code></pre><p> Run this sample code, it show the Barcelona’s Data in 2020 (click picture for <strong>zoom in</strong>)<br> <img src="/dataPrep/2.jpg" alt=" Data of FC Barcelona in 2020 (JSON)"></p></li></ol><h2 id="Getting-Raw-Data"><a href="#Getting-Raw-Data" class="headerlink" title="Getting Raw Data"></a>Getting Raw Data</h2><p>Getting the raw data from these two APIs.<br><img src="/dataPrep/3.jpg" alt="Raw Dataset of Players"></p><p>The players’ raw data have the amount of missing values, Nan, and incorrect values. Therefore, for the next step, pick a suitable way to clean&#x2F;replace these values and get a clean player’s dataset.</p><p><img src="/dataPrep/6.jpg" alt="Raw Dataset of Clubs"></p><p>Also, for the next step, check these two data frames data types, changing them as well to get a better analysis process and results.</p><p><em><strong>Here is Full Version Code for gathering data:<a href="https://github.com/HLeoF/laliga_machine_learning/blob/main/laligaProject/api_garthering_data.py">API Code</a></strong></em><br><em><strong>Full Raw Dataset of Players: <a href="https://github.com/HLeoF/laliga_machine_learning/blob/main/laligaProject/raw_laliga_playerDF.csv">Raw Dataset of Plyasers</a></strong></em><br><em><strong>Full Raw Dataset of Clubs: <a href="https://github.com/HLeoF/laliga_machine_learning/blob/main/laligaProject/raw_laliga_teamDF.csv">Raw Dataset of Clubs</a></strong></em></p><hr><h1 id="Cleaning-Data-Visualization"><a href="#Cleaning-Data-Visualization" class="headerlink" title="Cleaning Data &amp; Visualization"></a>Cleaning Data &amp; Visualization</h1><h2 id="Cleaning"><a href="#Cleaning" class="headerlink" title="Cleaning"></a>Cleaning</h2><p>For the data cleaning step, the first thing is to remove some of the attributes that are not useful. At the same time, use <code>countbox</code> plots to check whether the values of those columns are all the same or all blank. The picture below shows variables of <code>injured</code>, <code>number</code>, <code>captain</code>, <code>game_minutes</code>, <code>penalty_won</code>, and <code>dribble_past</code> meet it, so they should be dropped. The <code>teamId</code> and <code>birthDate</code> are also not useful, they also should be removed. For the data club data, just drop the variable of <code>teamID</code>. Therefore, removing these attributes does not affect future tasks. The dataset of clubs almost perfect, it does not some NaN value, missing values, or incorrect values. Thus, dataset of clubs is clean and ready to use.</p><p><img src="/dataPrep/visual/1.png" alt="Check Arrtibute"></p><p>After that, searching and replacing the NaN in datasets. First, the player’s height and weight contain some NaN, and the quantity of them is small, so replacing these NaN values with height means and weight means. Other variables contain a lot of NaN data, such <code>game_assist</code>, <code>goal_saved</code>, <code>game_appearc</code>, etc. Because NaN is these columns mean 0, they also mean that players are not performing in these skills. Therefore, using 0 to replace NaN for these attributes is a good choice.</p><p>Last, changing some data types for the dataset, such as switching height and weight data types from string to integer. Also changing position data type from string to category.</p><p><img src="/dataPrep/5.jpg" alt="Clean Dataset of Players"></p><p><img src="/dataPrep/4.jpg" alt="Clean Dataset of Clubs"></p><p><em><strong>Here is Full Version Code for Cleaning Data<a href="https://github.com/HLeoF/laliga_machine_learning/blob/main/laligaProject/data_cleaning.py">Cleaning Data Code</a></strong></em><br><em><strong>Full Clean Dataset of Players<a href="https://github.com/HLeoF/laliga_machine_learning/blob/main/laligaProject/clean_laliga_playerDF.csv">Clean Dataset of Players</a></strong></em><br><em><strong>Full Clean Dataset of Clubs<a href="https://github.com/HLeoF/laliga_machine_learning/blob/main/laligaProject/clean_laliga_teamDF.csv">Clean Dataset of Clubs</a></strong></em></p><hr><h2 id="Visualization"><a href="#Visualization" class="headerlink" title="Visualization"></a>Visualization</h2><p><img src="/dataPrep/visual/2.png" alt="Number of Nationality in La Liga"><br>The plot shows in addition to Spanish players, Argentine, Brazilian, French, and Portuguese players play more in La Liga.</p><p><img src="/dataPrep/visual/3.png" alt="Number of Red Card fro each Club 2020-2023"><br>This plot shows the total number of red cards received by the various clubs in La Liga from 2020 to 2023. Clubs getting more red cards may indicate having poor results. Teams that do not get red cards may show a less aggressive style of play. </p><p><img src="/dataPrep/visual/4.png" alt="number of Yellow Card For each Club 2020-2023"><br>This plot shows the total number of yellow cards received by various clubs in La Liga from 2020 to 2023. The number of yellow cards received may indicate a more aggressive style of play. For example, Getafe, this team style of play is very unappealing and they get good results through a lot of fouls.</p><p><img src="/dataPrep/visual/5.png" alt="Player Age and Total Goal Relationship"><br>The age of players from 25 to 30 may be are golden age, they can score more goals.</p><p><img src="/dataPrep/visual/6.png" alt="Number of Goal Save For each Club 2020-2023"><br>A team with more saves may indicate an inconsistent defense and may have a poor performance.</p><p><img src="/dataPrep/visual/7.png" alt="Total Wins For Clubs 2020-2023"><br>The top three teams in La Liga(Barcelona, Real Madrid, and Atletico Madrid) have won more games than any other team, which shows that they are stronger than any other team in La Liga.</p><p><img src="/dataPrep/visual/8.png" alt="Box Plot for Socred Looses For Clubs From 2020 to 2023"><br>The total scored at home by each team in La Liga is generally between 50 to 110 from 2020 to 2023.</p><p><img src="/dataPrep/visual/9.png" alt="Box Plot for Total Losses For Clubs From 2020 to 2023"><br>The total losses at home by each team in La Liga is generally between 50 to 70 from 2020 to 2023.</p><p><img src="/dataPrep/visual/10.png" alt="Total Losses For Clubs From 2020 To 2023"><br>The line plot shows that Real Madrid plays the most consistently each season. Because they have fewer losses every season.</p><p><em><strong>Here is Full Version Code for Data Visualization<a href="https://github.com/HLeoF/laliga_machine_learning/blob/main/laligaProject/viusal.py">Data Visualization Code</a></strong></em></p><hr><h1 id="Resource"><a href="#Resource" class="headerlink" title="Resource"></a>Resource</h1><p><code>Background &amp; Cover Image</code>:<a href="https://images.app.goo.gl/rrFyz3J2dLG91KgBA">https://images.app.goo.gl/rrFyz3J2dLG91KgBA</a><br><code>API for Gathering Data</code>: <a href="https://rapidapi.com/api-sports/api/api-football/">https://rapidapi.com/api-sports/api/api-football/</a></p>]]></content>
      
      
      
        <tags>
            
            <tag> Data Gathering </tag>
            
            <tag> Data Cleaning </tag>
            
            <tag> Data Preparation </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>Introduction</title>
      <link href="/2024/01/17/Introduction/"/>
      <url>/2024/01/17/Introduction/</url>
      
        <content type="html"><![CDATA[<h1 id="Topic"><a href="#Topic" class="headerlink" title="Topic"></a>Topic</h1><p><em><strong>Is the individual ability of La Liga players a key factor in determining how a club goes throughout a season? Whether a player’s performance on the pitch (such as dribbling, shots, passes, yellow card, red card, etc.) can indicate the outcome of every game and affect a club’s position at the end of each season.</strong></em></p><h1 id="Introduction"><a href="#Introduction" class="headerlink" title="Introduction"></a>Introduction</h1><p>&emsp;In real life, a lot of analysis work has been done based on players’ statistics. For example, it is possible to access a player’s performance and potential by analyzing a player’s passing, shooting, dribbling, and other data. This way will support clubs in making more informed choices in the transfer market for each season. Also, players’ data is used to optimize the teams’ training sessions to help players improve their individual abilities and overall performance. More in-depth analysis of player data is now needed to better understand the role and impact of players in games. This word cannot only offer the team more tactical options but also guide the club to make more good decisions during training and games. At the same time, it is desirable to use data analysis to predict fluctuations in players’ states and their performance at critical moments so that improving the stability and combat effectiveness of the teams in a game. Therefore, through in-depth analysis of player data, the club can be provided with tactical options and decision-making support, thereby improving team performance and results during a season. </p><p>&emsp;Soccer is the number one sport in the world, with tens of thousands of soccer fans watching every weekend around the world. Many people like the fast pace and physicality of the Premier League, some like the defensive art of Serie A, and some people like the attacking football of the Bundesliga. According to the latest World Soccer League ranking (<a href="https://www.teamform.com/en/league-ranking/world/2024/q1">https://www.teamform.com/en/league-ranking/world/2024/q1</a>), La Liga is second in the world, and the main reason it has a large group fans&#x2F;audience is that La Liga is known for its ball control and exquisite technique. On the pitch of La Liga, each team’s 11 players operate like a sophisticated machine for 90 minutes. Each man on the pitch is a part of the machine, and their performance affects the operation of the entire machine. Therefore, the various clubs in La Liga pay great attention to the comprehensive quality of players. Every touch, every pass, every breakthrough of players on the pitch is silently writing the fate of a club’s entire season. Thus, just by standing on the pitch they are playing a key role in the success of a club. In the data era, the soccer area is like a tiger that has grown wings. A player’s individual stats will become what the team or scout focuses on, which is an essential factor in the success of the club’s strategic development and team management. In addition, it also provides fans with a deeper soccer-watching experience, making each player’s performance stand out to the audience. </p><p><img src="/introduction/1.jpg" alt="The Latest World Soccer League Ranking"></p><p>&emsp;Many people or fans may subconsciously believe that if a club purchases players who have wonderful individual abilities, the whole club will win all the trophies. However, it is not like FIFA or Football Manager games where players can win everything if they are good enough. One of the more famous examples, Real Madrid bought a large number of expensive players(<a href="https://www.goal.com/en/news/what-galactico-ronaldo-beckham-all-real-madrids-super-signings/1lrrb6x9j0n9f1actzefqw47am">https://www.goal.com/en/news/what-galactico-ronaldo-beckham-all-real-madrids-super-signings/1lrrb6x9j0n9f1actzefqw47am</a>) in 2000 and formed the Galacticos I era(<a href="https://en.wikipedia.org/wiki/Gal%C3%A1cticos#First_gal%C3%A1ctico_era_2">https://en.wikipedia.org/wiki/Gal%C3%A1cticos#First_gal%C3%A1ctico_era_2</a>). At first, as the fans hoped, Real Madrid was able to win various titles from 2000 to 2002. However, since 2002, they have been unable to win any championships just like the honeymoon period of lovers is over. During this period, Real Madrid’s bitter rivals Barcelona won the championships in successive competitions. Therefore, a successful club may not often depend on the outstanding performances of individual players. If the whole club is not well coordinated or appears internal conflicts, the club’s results may also be affected. Besides, a player’s state fluctuation, injuries, and psychological quality are also important factors that affect the results of a game. Even players with outstanding individual skills can hurt the performance of the team once they are out of form or injured.</p><p><img src="/introduction/2.jpg" alt="The Players of Galacticos I Era"></p><p><img src="/introduction/3.jpg" alt="Japan vs. Belgium World Cup 2018"></p><p>&emsp;With the advent of the data era, both big-scale soccer clubs and small-scale clubs are beginning to pay more attention to players’ statistics. Each team has built its data analytics team. Not only it is used to analyze the data of one’s own players to offer a better strategy for the coach, but it is also useful to analyze the data of players of the opposing team to determine their weaknesses and obtain an advantage in a game. For example, before an important Derby game, one club’s data analyst team finds that the opponent’s back line is not strong enough to defend against high-altitude balls. They discovered this weakness through analyzing data such as opposition players’ height and their ability to head the ball. (2018 World Cup, Japan vs. Belgium, Belgium’s national team used this strategy to defeat Japan. The final is 3-2. Japan had the lead for a while.) During the game, the team used frequent crosses, made targeted attacks on the opponent’s weak points, and eventually won the game. In another example, one team’s analysts found that opponents’ midfielders had problems with passing accuracy and were prone to turnovers. They figure out this issue by analyzing the passing success of opposing players and their performance under high pressure. The team uses a high position and force-pressing approach in the game, taking advantage of the loose pass in the opponent’s midfield to launch a quick counterattack, and win the game eventually. Therefore, by making full use of players’ data for opponent analysis, one’s team can better make tactics and strategies, and grasp the shortcomings of opponents, which can help them win the game.</p><h1 id="Questions"><a href="#Questions" class="headerlink" title="Questions"></a>Questions</h1><ul><li><p><strong>Whether the official rating of a player can verify the situation of a team (good or bad) and its future trend?</strong></p></li><li><p><strong>Does the quality of a player’s shooting determine the outcome of a game and a club’s trend at the end of a season?</strong> </p></li><li><p><strong>Does the goalkeeper’s save ability become the key to the team’s victory?</strong></p></li><li><p><strong>Whether the number of red and yellow cards obtained by players can affect the trend of the team’s season?</strong></p></li><li><p><strong>Striker, Midfielder, or defender, which position has the most direct impact on the team ranking for each season?</strong></p></li><li><p><strong>Are the players’ on-field technique values (such as passes, defenses, saves, goals, etc.) have a positive correlation with team ranking?</strong></p></li><li><p><strong>Does the quantity and quality of penalty kicks determine a team’s performance?</strong></p></li><li><p><strong>Can a player’s duels won rate determine the outcome of the game?</strong></p></li><li><p><strong>Can players bring better results to the team as their skill boosts as the season progresses?</strong></p></li><li><p><strong>Can the number of lineups and appearances of a player determine a game’s result?</strong></p></li></ul><hr><h1 id="Resource"><a href="#Resource" class="headerlink" title="Resource"></a>Resource</h1><p><code>cover image</code>: <a href="https://images.app.goo.gl/RR4agxTTYDRBukKE8">https://images.app.goo.gl/RR4agxTTYDRBukKE8</a><br><code>World Cup 2018 Japan vs. Belgium</code>:<a href="https://images.app.goo.gl/qfCThxKCB2vMR4Mi6">https://images.app.goo.gl/qfCThxKCB2vMR4Mi6</a></p>]]></content>
      
      
      <categories>
          
          <category> Introduction </category>
          
      </categories>
      
      
        <tags>
            
            <tag> La Liga </tag>
            
            <tag> Introduction </tag>
            
            <tag> Machine Learning </tag>
            
        </tags>
      
    </entry>
    
    
  
  
</search>
